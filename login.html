<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" href="./CSS/loginsignup.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
    <div id="login">
        <h1> Login</h1>
       
        <div id="fb">
            <div class="fa fa-facebook ico" style=" font-size: 32px;">
                
            </div>
            <div>
                <h2>Facebook Signup</h2>
            </div>
        </div>

        <div id="gl">
            <div class="fa fa-google ico" style="font-size: 32px;"></div>
            <div>

                <h2>Google Signup</h2>
            </div>
        </div>
        
        <div class="name">
            <label for="">EMAIL</label>
            <input type="text" id="username" >
        </div>
        <div  class="name">
            <label for="">PASSWORD</label>
            <input type="password" id="password">
        </div>
        <p id="error"></p>
        <div id="sub" class="name" onclick="login()">
           <h1>Sign In</h1>
        </div>


        <h3 id="dont"><a href="signup.html">Don't have an account? Sign up here.</a></h3>
    </div>
</body>
</html>

<script>
    // async function login() {
    //     let detail={
    //         username:document.getElementById("username").value,
    //         password:document.getElementById("password").value,
    //     }

    //     detail=JSON.stringify(detail);
    //     console.log(detail)
    //     let url=`https://masai-api-mocker.herokuapp.com/auth/login`

    //     let res=await fetch(url,{
    //         method:"POST",
    //         body:detail,
    //         headers:{

    //             "Content-Type":"application/json"
    //         },
    //     });

    //     let data=await res.json();
    //     let name=document.getElementById("username").value;

    //     console.log(data)
    //     if (data.error==false){
    //         userData(name,data.token)
    //        // window.location.href="sucs.html"
    //         //profileDetails(name,data.token)

    //     }else{
    //         document.getElementById("error").textContent=data.message;
    //     }
    // }
    // async function userData(name,token){
    //     console.log(name,token)
    //     let url=`https://masai-api-mocker.herokuapp.com/user/${name}`

    //     let res=await fetch(url,{
    //         headers:{
    //             "Content-Type":"application/json",
    //             "Authorization": `Bearer ${token}`
    //         },
    //     })

    //     let data= await res.json();

    //     //console.log(data)
    //     console.log(data)
    //     let username=data.name;
    //     let email=data.email;
    //     //console.log(username,email);
    //     let user={
    //         login:true,
    //         name:username,
    //         email:email
    //     }
    //     console.log(user)
    //     localStorage.setItem("userDetail",JSON.stringify(user))
    //     window.location.href="index.html"
    // }



    function login(){
        username=document.getElementById("username").value
        password=document.getElementById("password").value
        let flag=true;
        let userBag=JSON.parse(localStorage.getItem("userArray"));
        console.log(userBag);
        if(userBag.length==0){
            document.getElementById("error").textContent=`You need to SignUp first`
        }
        userBag.map((item)=>{
            if(item.username==username&&item.password==password){
                let user={
                    login:true,
                    name:item.name,
                    email:item.email,
                }
                console.log(user)
                localStorage.setItem("userDetail",JSON.stringify(user))
                window.location.href="index.html"
                flag=false;
            }
        })
        if(flag==true){
            document.getElementById("error").textContent=`Invalid User credentials`
        }
    }
</script>